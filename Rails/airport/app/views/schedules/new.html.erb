<%= form_with model: @schedule do |f| %>
  <div class="mb-3">
    <h3>
      <%= f.label :flightschedule, "Schedule New Aircraft Flight Here " %>
    </h3>
  </div>
  <div class="mb-3" id="from">
    <%= f.label :from, "From : " %>
    <% cities = City.pluck(:name) %>
    <% cities.append("SELECT") %>
      <%= f.select :from, cities , :selected => "SELECT" %>
  </div>
  <div class="mb-3" id="dest" style="display:none;">
    <%= f.label :destination %>
    <%= f.select :destination, ["Select"] %>
  </div>
  <div class="mb-3" style="display:none;">
    <%= f.label :schedule, "Available Flight Schedule for this route" %>
  </div>
  <div class="mb-3" style="display:none;">
    <%= f.label :aircraft, "Available Aircraft for this flights" %>
  </div>
  <div class="mb-3" style="display:none;">
    <%= f.label :pilot, "Available pilot to fly this aircraft" %>
  </div>
  <div class="mb-3" style="display:none;">
    <%= f.submit "Schedule this Flight " %>
  </div>

  <% end %>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script>
      let schedule_from = document.getElementById('schedule_from');
      let dest = document.getElementById('dest');
      let len = schedule_from.length;

      //schedule_from.addEventListener("change", show());
      $('#schedule_from').change(function(){
        dest.style.display = "block";
        schedule_destination = document.getElementById('schedule_destination');
        schedule_destination.innerHTML = "";
        let i = 0;
        let city_from = schedule_from.options[schedule_from.selectedIndex].text;
        while(i < len ){
          let city = schedule_from.options.item(i).text;
          console.log(city,i);
          console.log( city_from != city)
          if (city_from != city ) {
            let option = document.createElement("option");
            option.value = option.text = city ;
            schedule_destination.appendChild(option);
          }
          i++;
        }
        schedule_destination.value = "SELECT";
      });

    </script>